" Use Vim settings, rather then Vi settings (much better!).
" This must be first, because it changes other options as a side effect.
set nocompatible

"==========================================
" Initial Plugin
"==========================================

if empty(glob('~/.vim/autoload/plug.vim'))
  silent !curl -fLo ~/.vim/autoload/plug.vim --create-dirs
    \ https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin('~/.vim/plugged')

" Colorscheme https://github.com/sainnhe/gruvbox-material
Plug 'sainnhe/gruvbox-material'

" Airline https://github.com/vim-airline/vim-airline
Plug 'vim-airline/vim-airline'

" NERDTREE https://github.com/preservim/nerdtree
Plug 'scrooloose/nerdtree'

" Syntax highlight https://github.com/sheerun/vim-polyglot
Plug 'sheerun/vim-polyglot'

" Autocompletion https://github.com/davidhalter/jedi-vim
Plug 'davidhalter/jedi-vim'

" Flake8 https://github.com/nvie/vim-flake8
Plug 'nvie/vim-flake8'

" Markdown https://github.com/plasticboy/vim-markdown
Plug 'godlygeek/tabular'
Plug 'plasticboy/vim-markdown'

call plug#end()


"==========================================
" General Settings
"==========================================

syntax on

set number
set history=500
set autoread
set showcmd
set showmode
set hidden

" Search
set incsearch
set hlsearch
set ignorecase
set smartcase

" Security
set modelines=0
set nomodeline

" Allow backspace in insert mode
set backspace=indent,eol,start

" Disable cursor blink
set gcr=a:blinkon0

" Always show current position
set ruler

" Tab autocomplete and ignore
set wildmode=list:longest,full
set wildignore=*.pyc
set wildignore=*.jpg,*.png,*.gif

" Never recognizes leading zero number as octal number
set nrformats-=octal

let mapleader=","

filetype plugin on
filetype indent on

set autoindent
set smartindent
set smarttab
set expandtab

" Colorscheme config, see :help gruvbox-material.txt
if has('termguicolors')
  set termguicolors
endif
set background=dark
let g:gruvbox_material_background = 'hard'
"let g:gruvbox_material_background = 'soft'
colorscheme gruvbox-material

" NERDTREE config
map <F3> :NERDTreeMirror<CR>
map <F3> :NERDTreeToggle<CR>

" Airline config
let g:airline_theme = 'gruvbox_material'
let g:airline_section_z = airline#section#create(['%l/%L :%v'])
let g:airline_section_y = airline#section#create_right([])
let g:airline#extensions#tabline#enabled = 1
let g:airline#extensions#tabline#show_close_button = 0
let g:airline#extensions#tabline#show_tab_nr = 0
let g:airline#extensions#tabline#tab_nr_type = 2
let g:airline#extensions#tabline#buffer_idx_mode = 1
nmap <leader>1 <Plug>AirlineSelectTab1
nmap <leader>2 <Plug>AirlineSelectTab2
nmap <leader>3 <Plug>AirlineSelectTab3
nmap <leader>4 <Plug>AirlineSelectTab4
nmap <leader>5 <Plug>AirlineSelectTab5
nmap <leader>6 <Plug>AirlineSelectTab6
nmap <leader>7 <Plug>AirlineSelectTab7
nmap <leader>8 <Plug>AirlineSelectTab8
nmap <leader>9 <Plug>AirlineSelectTab9
nmap <leader>0 <Plug>AirlineSelectTab0
nmap <leader>- <Plug>AirlineSelectPrevTab
nmap <leader>+ <Plug>AirlineSelectNextTab
set t_Co=256

" Autocompletion config
let g:jedi#use_tabs_not_buffers = 1
autocmd FileType python setlocal completeopt-=preview

" Python config
" autocmd FileType python map <buffer> <F7> :call flake8#Flake8()<CR>

" Markdown config
let g:vim_markdown_folding_disabled = 1
let g:vim_markdown_toc_autofit = 1

